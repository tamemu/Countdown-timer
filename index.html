<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カウントダウンタイマー</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }
        #countdown {
            font-size: 40px;
            margin-top: 20vh;
            cursor: pointer;
        }
        #settings {
            margin-top: 20px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Montserrat&family=Pacifico&family=Courier+Prime&display=swap" rel="stylesheet">
</head>
<body>
    <div id="countdown"></div>
    
    <div id="settings" style="display: none;">
        <label for="target-time">目標日時:</label>
        <input type="datetime-local" id="target-time">
        <br>
        <label for="font-size">フォントサイズ:</label>
        <input type="number" id="font-size" value="40">
        <br>
        <label for="font-family">フォント:</label>
        <select id="font-family">
            <option value="Arial">Arial</option>
            <option value="Verdana">Verdana</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Roboto">Roboto</option>
            <option value="Montserrat">Montserrat</option>
            <option value="Pacifico">Pacifico</option>
            <option value="Courier Prime">Courier Prime</option>
            <option value="Georgia">Georgia</option>
            <option value="Comic Sans MS">Comic Sans MS</option>
            <option value="Impact">Impact</option>
            <option value="Lucida Console">Lucida Console</option>
        </select>
        <br>
        <label for="font-color">文字色:</label>
        <input type="color" id="font-color" value="#000000">
        <br>
        <label for="text-stroke-width">縁取りの太さ:</label>
        <input type="number" id="text-stroke-width" value="0">
        <br>
        <label for="text-stroke-color">縁取りの色:</label>
        <input type="color" id="text-stroke-color" value="#000000">
        <br>
        <label for="position">表示位置:</label>
        <select id="position">
            <option value="center">中央</option>
            <option value="top">上部</option>
            <option value="bottom">下部</option>
        </select>
        <br>
        <button id="save-settings">保存</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const countdownElement = document.getElementById("countdown");
            const saveSettingsButton = document.getElementById("save-settings");
            const settingsDiv = document.getElementById("settings");
            
            const targetTimeInput = document.getElementById("target-time");
            const fontSizeInput = document.getElementById("font-size");
            const fontFamilyInput = document.getElementById("font-family");
            const fontColorInput = document.getElementById("font-color");
            const textStrokeWidthInput = document.getElementById("text-stroke-width");
            const textStrokeColorInput = document.getElementById("text-stroke-color");
            const positionInput = document.getElementById("position");
            
            let targetTime = localStorage.getItem("targetTime") || "2025-07-05T04:18";
            let fontSize = localStorage.getItem("fontSize") || "40";
            let fontFamily = localStorage.getItem("fontFamily") || "Arial";
            let fontColor = localStorage.getItem("fontColor") || "#000000";
            let textStrokeWidth = localStorage.getItem("textStrokeWidth") || "0";
            let textStrokeColor = localStorage.getItem("textStrokeColor") || "#000000";
            let position = localStorage.getItem("position") || "center";
            
            function updateCountdown() {
                if (!targetTime) return;
                const now = new Date();
                const targetDate = new Date(targetTime);
                const diff = targetDate - now;
                if (diff <= 0) {
                    countdownElement.textContent = "00日 00時間 00分 00秒";
                    return;
                }
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                countdownElement.textContent = `${days}日 ${hours}時間 ${minutes}分 ${seconds}秒`;
            }
            
            function applySettings() {
                countdownElement.style.fontSize = fontSize + "px";
                countdownElement.style.fontFamily = fontFamily;
                countdownElement.style.color = fontColor;
                countdownElement.style.webkitTextStrokeWidth = textStrokeWidth + "px";
                countdownElement.style.webkitTextStrokeColor = textStrokeColor;

                if (position === "top") {
                    countdownElement.style.position = "absolute";
                    countdownElement.style.top = "10%";
                } else if (position === "bottom") {
                    countdownElement.style.position = "absolute";
                    countdownElement.style.bottom = "10%";
                } else {
                    countdownElement.style.position = "relative";
                    countdownElement.style.top = "50%";
                    countdownElement.style.transform = "translateY(-50%)";
                }
            }
            
            countdownElement.addEventListener("click", () => {
                settingsDiv.style.display = "block";
                targetTimeInput.value = targetTime;
                fontSizeInput.value = fontSize;
                fontFamilyInput.value = fontFamily;
                fontColorInput.value = fontColor;
                textStrokeWidthInput.value = textStrokeWidth;
                textStrokeColorInput.value = textStrokeColor;
                positionInput.value = position;
            });
            
            saveSettingsButton.addEventListener("click", () => {
                targetTime = targetTimeInput.value;
                fontSize = fontSizeInput.value;
                fontFamily = fontFamilyInput.value;
                fontColor = fontColorInput.value;
                textStrokeWidth = textStrokeWidthInput.value;
                textStrokeColor = textStrokeColorInput.value;
                position = positionInput.value;
                localStorage.setItem("targetTime", targetTime);
                localStorage.setItem("fontSize", fontSize);
                localStorage.setItem("fontFamily", fontFamily);
                localStorage.setItem("fontColor", fontColor);
                localStorage.setItem("textStrokeWidth", textStrokeWidth);
                localStorage.setItem("textStrokeColor", textStrokeColor);
                localStorage.setItem("position", position);
                applySettings();
                settingsDiv.style.display = "none";
            });
            
            setInterval(updateCountdown, 1000);
            applySettings();
        });
    </script>
</body>
</html>
